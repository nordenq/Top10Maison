---
import BaseLayout from "../layouts/BaseLayout.astro";
import CategoryNav from "../components/CategoryNav.astro";
import CategoryCard from "../components/CategoryCard.astro";
import { buildDataIndex } from "../utils/data";
import { subcategoryToplistUrl } from "../utils/routes";
import { buildCanonical, requireSite } from "../utils/seo";
import { buildBreadcrumbSchema } from "../utils/schema";

const { categories, toplists } = buildDataIndex();
const latestToplists = [...toplists].sort((a, b) => b.performanceScore - a.performanceScore).slice(0, 4);
const categoryMap = new Map(categories.map((category) => [category.slug, category]));

const site = requireSite(Astro.site);
const title = "Top10Maison — Trending Product Rankings for Every Room";
const description = "Compare the best home products, track what’s trending, and shop smarter with curated top lists for kitchens, appliances, and more.";
const canonical = buildCanonical(site, "/");
const schema = [buildBreadcrumbSchema(site, [{ name: "Home", path: "/" }])];
---

<BaseLayout
  title={title}
  description={description}
  canonical={canonical}
  schema={schema}
  ogImage="/og-image.jpg"
>
  <section class="section bg-surface">
    <div class="page-container grid items-center gap-10 md:grid-cols-2">
      <div>
        <p class="text-xs font-semibold uppercase tracking-[0.3em] text-ink/70">Home essentials hub</p>
        <h1 class="mt-3 text-4xl font-semibold md:text-5xl">Shop smarter with curated top lists.</h1>
        <p class="mt-4 text-lg text-ink/70">
          Best picks for your home. Trending. Trusted. Wallet-friendly.
        </p>
        <p class="mt-3 text-sm text-ink/70">
          Curated guides, reviewed for clarity and real-world fit.
        </p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a class="btn" href="#top-categories">Browse categories</a>
          <a class="btn-ghost" href="#latest-toplists">Latest top lists</a>
        </div>
      </div>
      <div class="card p-6">
        <h2 class="text-xl font-semibold">What you will find here</h2>
        <ul class="mt-4 space-y-3 text-sm text-ink/70">
          <li>Best‑of lists for every room, built with consistent criteria.</li>
          <li>Trending picks and smart comparisons to speed up your decision.</li>
          <li>Concise buying guidance that keeps the focus on what matters.</li>
          <li>Regularly refreshed picks based on ratings, review volume, and value.</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="page-container">
      <div class="flex flex-wrap items-end justify-between gap-4">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.3em] text-ink/70">Brand moments</p>
          <h2 class="mt-2 text-2xl font-semibold">Small details, clearer picks.</h2>
        </div>
        <p class="max-w-xl text-sm text-ink/70">
          A friendly, modern guide with just enough warmth to feel human and just enough rigor to trust.
        </p>
      </div>
      <div class="mt-6 grid gap-6 md:grid-cols-3">
        <div class="card card-hover p-5">
          <div class="flex items-center gap-3">
            <span class="flex h-10 w-10 items-center justify-center rounded-2xl bg-accent-soft text-ink">
              <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true">
                <path
                  d="M4 7.5C4 5.6 5.6 4 7.5 4h9C18.4 4 20 5.6 20 7.5v9c0 1.9-1.6 3.5-3.5 3.5h-9C5.6 20 4 18.4 4 16.5v-9z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                />
                <path d="M8 9.5h8M8 12.5h5M8 15.5h6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
              </svg>
            </span>
            <h3 class="text-lg font-semibold">Friendly filters</h3>
          </div>
          <p class="mt-3 text-sm text-ink/70">
            We translate specs into real-life choices so you can decide faster.
          </p>
        </div>
        <div class="card card-hover p-5">
          <div class="flex items-center gap-3">
            <span class="flex h-10 w-10 items-center justify-center rounded-2xl bg-accent-soft text-ink">
              <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true">
                <path
                  d="M6 7.5h12M6 12h7M6 16.5h10"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                />
                <circle cx="18" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="1.6" />
              </svg>
            </span>
            <h3 class="text-lg font-semibold">Shortlists only</h3>
          </div>
          <p class="mt-3 text-sm text-ink/70">
            No endless grids. Just the top picks that actually earn their spot.
          </p>
        </div>
        <div class="card card-hover p-5">
          <div class="flex items-center gap-3">
            <span class="flex h-10 w-10 items-center justify-center rounded-2xl bg-accent-soft text-ink">
              <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true">
                <path
                  d="M7.5 4.5h6.5L18 8v11c0 .9-.7 1.5-1.5 1.5h-9C6.7 20.5 6 19.9 6 19V6c0-.8.7-1.5 1.5-1.5z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                />
                <path d="M9 12l2 2 4-4" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
              </svg>
            </span>
            <h3 class="text-lg font-semibold">Clear criteria</h3>
          </div>
          <p class="mt-3 text-sm text-ink/70">
            Transparent scoring and simple explanations so the rankings feel fair.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section id="top-categories" class="section bg-surface">
    <div class="page-container">
      <div class="flex flex-wrap items-end justify-between gap-4">
        <div>
          <h2 class="text-2xl font-semibold">Top categories</h2>
          <p class="mt-2 text-sm text-ink/70">Start with a room, then drill down to the best lists.</p>
        </div>
        <a class="text-sm font-semibold text-accent" href="/#top-categories">View all</a>
      </div>
      <div class="mt-6 grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {categories.map((category, index) => (
          <CategoryCard
            category={category}
            loading={index < 3 ? "eager" : "lazy"}
            fetchpriority={index === 0 ? "high" : undefined}
          />
        ))}
      </div>
    </div>
  </section>

  <section id="latest-toplists" class="section">
    <div class="page-container">
      <div class="flex flex-wrap items-end justify-between gap-4">
        <div>
          <h2 class="text-2xl font-semibold">Latest top lists</h2>
          <p class="mt-2 text-sm text-ink/70">Freshly updated guides with ranked picks and quick advice.</p>
        </div>
      </div>
      <div class="mt-6 grid gap-6 md:grid-cols-2">
        {latestToplists.map((list, index) => {
          const category = categoryMap.get(list.category);
          const image = list.image ?? category?.image ?? "/logo.svg";
          const imageSrcset = list.imageSrcset ?? category?.imageSrcset;
          const isLcp = index === 0;
          return (
            <a
              class="card card-hover grid gap-4 overflow-hidden md:grid-cols-[200px_1fr]"
              href={subcategoryToplistUrl(list.category, list.subcategory, list.count, list.keywordSlug)}
            >
              <img
                class="h-full w-full object-cover"
                src={image}
                alt={list.title}
                loading={isLcp ? "eager" : "lazy"}
                fetchpriority={isLcp ? "high" : undefined}
                decoding="async"
                srcset={imageSrcset}
                sizes="(max-width: 768px) 100vw, 200px"
                width="400"
                height="300"
              />
              <div class="p-5">
                <p class="text-xs font-semibold uppercase tracking-[0.25em] text-ink/70">Top list</p>
                <h3 class="mt-2 text-lg font-semibold">{list.title}</h3>
                <p class="mt-2 text-sm text-ink/70">{list.metaDescription}</p>
              </div>
            </a>
          );
        })}
      </div>
    </div>
  </section>

  <section class="section bg-surface">
    <div class="page-container">
      <h2 class="text-2xl font-semibold">What is Top10Maison?</h2>
      <p class="mt-3 text-sm text-ink/70">
        Top10Maison is a home-focused review site that ranks products using consistent criteria, transparent
        scoring, and real-world use cases. Our goal is to help you choose faster with shortlists that reflect
        everyday needs, not marketing hype.
      </p>
    </div>
  </section>
</BaseLayout>
