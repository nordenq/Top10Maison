---
import type { Product } from "../utils/data";
import ProductCard from "./ProductCard.astro";

const {
  title,
  intro,
  products,
  schema = false,
  startRank = 1,
  id,
  eagerCount = 1,
  surface = false
} = Astro.props as {
  title: string;
  intro?: string;
  products: Product[];
  schema?: boolean;
  startRank?: number;
  id?: string;
  eagerCount?: number;
  surface?: boolean;
};
---

<section class={`section${surface ? " bg-surface" : ""}`} id={id}>
  <div class="page-container">
    <h2 class="text-2xl font-semibold">{title}</h2>
    {intro ? <p class="mt-3 text-sm text-ink/70">{intro}</p> : null}
    <div class="mt-6 grid gap-6">
      {products.map((product, index) => (
        <ProductCard
          product={product}
          rank={startRank + index}
          schema={schema}
          loading={index < eagerCount ? "eager" : "lazy"}
          fetchpriority={index === 0 && eagerCount > 0 ? "high" : undefined}
        />
      ))}
    </div>
  </div>
</section>
