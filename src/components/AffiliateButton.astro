---
const { url, label = "View on Amazon", productSlug, affiliate = "amazon", ariaLabel } = Astro.props as {
  url: string;
  label?: string;
  productSlug: string;
  affiliate?: string;
  ariaLabel?: string;
};

const isAmazon = affiliate.toLowerCase() === "amazon";
const dataAttrs = {
  "data-product": productSlug,
  ...(isAmazon ? { "data-affiliate": "amazon" } : {})
};
const computedAriaLabel = ariaLabel || label;
---

<a
  class="btn"
  href={url}
  rel="nofollow sponsored"
  target="_blank"
  aria-label={computedAriaLabel}
  {...dataAttrs}
>
  {label}
</a>
