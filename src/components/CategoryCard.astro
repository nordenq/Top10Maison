---
import type { Category, ChildSubcategory, Subcategory } from "../utils/data";
import { categoryUrl, childSubcategoryUrl, subcategoryUrl } from "../utils/routes";

const { category, subcategory, childsubcategory, parentSubcategory } = Astro.props as {
  category: Category;
  subcategory?: Subcategory;
  childsubcategory?: ChildSubcategory;
  parentSubcategory?: Subcategory;
};

const href = childsubcategory && parentSubcategory
  ? childSubcategoryUrl(category.slug, parentSubcategory.slug, childsubcategory.slug)
  : subcategory
    ? subcategoryUrl(category.slug, subcategory.slug)
    : categoryUrl(category.slug);
const title = childsubcategory?.name ?? subcategory?.name ?? category.name;
const description = childsubcategory?.description ?? subcategory?.description ?? category.description;
const image = childsubcategory?.image ?? subcategory?.image ?? category.image ?? "/logo.svg";
---

<a class="card group flex h-full flex-col overflow-hidden" href={href}>
  <div class="relative">
    <img
      class="h-44 w-full object-cover"
      src={image}
      alt={title}
      loading="lazy"
      width="640"
      height="360"
    />
  </div>
  <div class="flex flex-1 flex-col gap-2 p-4">
    <div class="flex items-center justify-between">
      <h3 class="text-lg font-semibold">{title}</h3>
      <span class="text-lg text-accent">â†’</span>
    </div>
    <p class="text-sm text-ink/70">{description}</p>
  </div>
</a>
